<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">

    <title>Home</title>

    <link rel="stylesheet" type="text/css" th:href="@{/webjars/bootstrap/css/bootstrap.min.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{/fontawesome/all.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/style.css}" />
    <script type="text/javascript" th:src="@{/webjars/jquery/jquery.min.js}" ></script>
    <script type="text/javascript" th:src="@{/webjars/bootstrap/js/bootstrap.min.js}" ></script>

</head>
<body>
    <form th:action="@{/logout}" method="post" th:hidden="true" name="logoutForm">
        <input type="submit" />
    </form>
    <div class="logout">
        <h5 th:inline="text">Welcome [[${#httpServletRequest.remoteUser}]] ||  <a th:href="@{/logout}" class="link-danger" id="logoutLink">Logout</a> </h5>
    </div>

    <div>
        <h1>Manage Data  </h1>
        <br>
    </div>

    <div th:if="${message != null}" class="alert alert-success text-center" >
        [[${message}]]
    </div>

    <div>
        <table class="table table-bordered border-warning table-hover table-responsive-xL">
            <thead class ="thead-dark">
            <tr>
                <th>
                    ID
                </th>
                <th>
                    Nomor Hp
                </th>
                <th>
                    File
                </th>
                <th>
                    Status
                </th>
                <th>
                    Action
                </th>
                <th>
                    Description
                </th>
                <th>
                    Updated At
                </th>
                <th>
                    Updated By
                </th>

            </tr>
            </thead>

            <tbody class ="thead-light">
            <tr th:each="result, hh : ${listResults}">
                <td>[[${result.id}]]</td>
                <td>[[${result.nomor_tlp}]]</td>
                <td>
                    <audio controls>
                        <source th:src="@{${result.path}}" type="audio/wav">
                        Your browser does not support the audio tag.
                    </audio>
<!--                    <audio src="//samplelib.com/lib/preview/wav/sample-6s.wav" controls="" controlslist="nodownload"></audio>-->
<!--                    <audio src="http://52.197.203.216/voice/callrecord.wav" controls="" controlslist="nodownload"></audio>-->
                </td>
                <td>
                    [[${result.status}]]
                </td>
                <td>
                    <a th:href="@{${'/update/' +result.id +'/1'}}" class="btn btn-outline-success" >Verify</a>
                    <a th:href="@{${'/update/' +result.id +'/2'}}" class="btn btn-outline-danger" >Not Verify</a>
                </td>
                <td>[[${result.description}]]</td>
                <td>
                    [[${result.updated_at}]]
                </td>
                <td>
                    [[${result.updated_by}]]
                </td>

            </tr>
            </tbody>

        </table>
    </div>

<script type="text/javascript">
	$(document).ready(function() {
		$("#logoutLink").on("click", function(e) {
			e.preventDefault();
			document.logoutForm.submit();
		});
	});

	$(document).ready(function() {
		$(".link-delete").on("click", function(e){
			e.preventDefault();
			link = $(this);
			//alert($(this).attr("href"));

			userId = link.attr("userId");
			$("#yesButton").attr("href", link.attr("href"));
			$("#confirmText").text("Are you sure you want to delete this user ID" + userId);
			$("#confirmModal").modal();
		});
	});

	function clearFilter(){
		window.location="[[@{/}]]";
	}

     function submitForm() {
        var data = $('#myForm').serialize();
        $.ajax({
          url: '/report/export/excel',
          type: 'post',
          data: data
        });
      }

       const timestampBtn = document.getElementById('updatedAt');
       function update(){
        const timestamp = Date.now();
        console.log(timestamp);
        timestampBtn.textContent = timestamp;
       }


</script>
</body>

</html>